{% extends "base.html" %}
{% block title %}Create Exam - Online Examination System{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto bg-white rounded-lg shadow p-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Create New Exam</h2>
    <form method="POST" id="createExamForm">
        <div class="mb-4">
            <label class="block text-gray-700 font-semibold mb-2">Exam Title</label>
            <input type="text" name="title" required class="w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-500" placeholder="Enter exam title">
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 font-semibold mb-2">Description</label>
            <textarea name="description" required class="w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-500" placeholder="Short description"></textarea>
        </div>
        <div class="mb-4">
            <label class="block text-gray-700 font-semibold mb-2">Duration (minutes)</label>
            <input type="number" name="duration" min="1" required class="w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-500" placeholder="Duration in minutes">
        </div>
        <div class="mb-6">
            <label class="block text-gray-700 font-semibold mb-2">Number of Questions</label>
            <input type="number" name="question_count" id="question_count" min="1" max="50" value="5" required class="w-full px-4 py-2 border rounded focus:ring-2 focus:ring-blue-500">
        </div>
        <div id="questionsContainer"></div>
        <button type="submit" class="mt-6 w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Create Exam</button>
    </form>
</div>
<script>
    function createQuestionFields(count) {
        let html = '';
        for(let i=0;i<count;i++) {
            html += `<div class="mb-6 border-t pt-6">
                <label class="block text-lg font-semibold mb-2">Question ${i+1}</label>
                <input type="text" name="question_${i}" required class="w-full px-4 py-2 border rounded mb-2" placeholder="Enter question text">
                <div class="grid grid-cols-2 gap-4 mb-2">
                    <div><input type="text" name="option_${i}_0" required class="w-full px-3 py-2 border rounded" placeholder="Option 1"></div>
                    <div><input type="text" name="option_${i}_1" required class="w-full px-3 py-2 border rounded" placeholder="Option 2"></div>
                    <div><input type="text" name="option_${i}_2" required class="w-full px-3 py-2 border rounded" placeholder="Option 3"></div>
                    <div><input type="text" name="option_${i}_3" required class="w-full px-3 py-2 border rounded" placeholder="Option 4"></div>
                </div>
                <label class="block text-sm font-medium mb-1">Correct Answer</label>
                <select name="correct_answer_${i}" required class="w-full px-3 py-2 border rounded">
                    <option value="0">Option 1</option>
                    <option value="1">Option 2</option>
                    <option value="2">Option 3</option>
                    <option value="3">Option 4</option>
                </select>
            </div>`;
        }
        document.getElementById('questionsContainer').innerHTML = html;
    }
    document.getElementById('question_count').addEventListener('input', function() {
        const count = Math.min(Math.max(parseInt(this.value), 1), 50);
        createQuestionFields(count);
    });
    // Initialize default
    createQuestionFields(document.getElementById('question_count').value);
</script>
{% endblock %}
